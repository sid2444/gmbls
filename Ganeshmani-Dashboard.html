<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ganeshmani Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
      *{
      margin:0;
      padding:0;
      box-sizing:border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body{
      background:#cdb7ff;
    }

    .app{
      display:flex;
      height:100vh;
      padding:20px;
      flex-direction: column;
    }

    .sidebar{
      width:100%;
      background:#0f172a;
      color:white;
      border-radius:20px;
      padding:20px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      margin-bottom: 15px;
    }

    .logo{
      font-size:22px;
      font-weight:700;
    }

    .nav {
      display: none;
      flex-direction: column;
    }

    .nav.active {
      display: flex;
    }

    .nav li{
      list-style:none;
      padding:12px;
      border-radius:12px;
      margin:6px 0;
      cursor:pointer;
    }

    .nav li i{
      margin-right:10px;
    }

    .nav li.active,
    .nav li:hover{
      background:#c7f000;
      color:black;
    }

    .download{
      background:#c7f000;
      color:black;
      border-radius:16px;
      padding:15px;
      text-align:center;
      display: none;
    }

    .main{
      flex:1;
      margin-left:0;
      background:#f9f9fb;
      border-radius:24px;
      padding:20px;
      overflow-y: auto;
    }

    .topbar{
      display:flex;
      flex-direction: column;
      gap: 15px;
      margin-bottom: 20px;
    }

    .top-actions{
      display:flex;
      gap:10px;
      align-items:center;
      width: 100%;
    }

    .top-actions input{
      padding:8px 15px;
      border-radius:20px;
      border:1px solid #ddd;
      flex: 1;
    }

    .avatar{
      border-radius:50%;
    }

    .courses h3 span{
      float:right;
      color:#999;
      font-size:14px;
    }

    .course-cards{
      display:grid;
      grid-template-columns:1fr;
      gap:15px;
      margin-top:15px;
    }

    .course, .premium{
      background:white;
      padding:15px;
      border-radius:16px;
      box-shadow:0 10px 25px rgba(0,0,0,.05);
    }

    .premium{
      background:#0f172a;
      color:white;
    }

    .premium button{
      margin-top:10px;
      padding:8px 14px;
      border:none;
      border-radius:12px;
      background:#c7f000;
      cursor:pointer;
    }

    .grid{
      display:grid;
      grid-template-columns:1fr;
      gap:15px;
      margin-top:25px;
    }

    .box{
      background:white;
      padding:15px;
      border-radius:16px;
    }

    .bars{
      display:flex;
      gap:10px;
      height:120px;
      align-items:flex-end;
      margin-top:10px;
    }
     .logo1{
    font-size:22px;
    font-weight:700;
    margin-bottom: 20%;
   
  }

    .bars span{
      flex:1;
      background:#c7f000;
      border-radius:10px;
    }

    .schedule li{
      list-style:none;
      margin:8px 0;
    }

    .calendar{
      display:grid;
      grid-template-columns:repeat(7,1fr);
      gap:5px;
      margin-top:10px;
      text-align:center;
    }

    .today{
      background:#c7f000;
      border-radius:50%;
    }

    .assign{
      display:flex;
      justify-content:space-between;
      margin:8px 0;
    }

    .assign span{
      font-size:12px;
    }

    .in span{ color:orange; }
    .done span{ color:green; }
    .up span{ color:blue; }

    .stats-container{
      background:#ffffff;
      padding:20px;
      border-radius:18px;
      box-shadow:0 15px 40px rgba(0,0,0,.1);
      display:grid;
      grid-template-columns:repeat(2, 1fr);
      gap:15px;
      margin-top:15px;
    }

    .stat-box{
      background:#f8fafc;
      border-radius:14px;
      padding:15px;
      text-align:left;
      border:1px solid #e5e7eb;
      transition:.3s;
    }

    .stat-box:hover{
      transform:translateY(-4px);
      box-shadow:0 10px 25px rgba(0,0,0,.1);
    }

    .stat-box span{
      font-size:12px;
      color:#6b7280;
    }

    .stat-box h3{
      margin-top:6px;
      font-size:18px;
      color:#0f172a;
    }

    /* Special highlight for remaining */
    .stat-box.highlight{
      background:#0f172a;
      color:white;
    }

    .stat-box.highlight span{
      color:#c7f000;
    }

    .stat-box.highlight h3{
      color:white;
    }

    .mobile-toggle {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
    }

    .menu-toggle {
      background: #c7f000;
      color: black;
      border: none;
      border-radius: 10px;
      padding: 8px 15px;
      font-size: 18px;
      cursor: pointer;
    }

    /* Desktop styles */
    @media (min-width: 1024px) {
      .app {
        flex-direction: row;
        height: 100vh;
        padding: 20px;
      }
      
      .sidebar {
        width: 230px;
        margin-bottom: 0;
        display: flex;
      }
      
      .nav {
        display: flex !important;
      }
      
      .main {
        margin-left: 20px;
      }
      
      .topbar {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
      }
      
      .top-actions {
        width: auto;
      }
      
      .top-actions input {
        width: 200px;
      }
      
      .course-cards {
        grid-template-columns: repeat(4, 1fr);
      }
      
      .grid {
        grid-template-columns: repeat(4, 1fr);
      }
      
      .stats-container {
        grid-template-columns: repeat(4, 1fr);
      }
      
      .download {
        display: block;
      }
      
      .mobile-toggle {
        display: none;
      }
      
      .menu-toggle {
        display: none;
      }
    }

    /* Tablet styles */
    @media (min-width: 768px) and (max-width: 1023px) {
      .app {
        flex-direction: column;
      }
      
      .sidebar {
        width: 100%;
      }
      
      .main {
        margin-left: 0;
      }
      
      .topbar {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
      }
      
      .top-actions {
        width: auto;
      }
      
      .course-cards {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .stats-container {
        grid-template-columns: repeat(4, 1fr);
      }
      
      .download {
        display: block;
      }
    }
    </style>
</head>
<body >
<div class="app">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="mobile-toggle">
      <div class="logo">Ganeshmani</div>
      <button class="menu-toggle" id="menuToggle">
        <i class="fas fa-bars"></i>
      </button>
    </div>

    <ul class="nav" id="navMenu">
        <div class="logo1">Ganeshmani</div>
      <li id="dashboard" class="active"><i class="fas fa-grid"></i> Dashboard</li>
      <li id="customer"><i class="fas fa-book"></i>New Customer </li>
     <li id="records"><i class="fas fa-users"></i> All Customer</li>
      <li><i class="fas fa-message"></i> Messages</li>
      <li><i class="fas fa-bell"></i> Notifications</li>
      <li><i class="fas fa-calendar"></i> Calendars</li>
      <li><i class="fas fa-users"></i> Community</li>
      <li><i class="fas fa-gear"></i> Settings</li>
    </ul>

    <div class="download">
      <i class="fas fa-download"></i>
      <p>Download our<br>mobile app</p>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">

    <!-- HEADER -->
    <header class="topbar">
      <h2>Welcome back, siddharth üëã</h2>
      <div class="top-actions">
        <input type="text" placeholder="Search courses">
        <img src="https://i.pravatar.cc/40" class="avatar">
      </div>
    </header>

    <!-- NEW COURSES -->
    <section class="courses">
      <h2>Quick Stats</h2>
      <!-- QUICK STATS -->
      <div class="stats-container">

        <div class="stat-box">
          <span>Total Work</span>
          <h3 id="tw">0</h3>
        </div>

        <div class="stat-box">
          <span>Work 8.5</span>
          <h3 id="w85">0</h3>
        </div>

        <div class="stat-box">
          <span>Work 6.5</span>
          <h3 id="w65">0</h3>
        </div>

        <div class="stat-box">
          <span>PVC Pipe</span>
          <h3 id="pvc">0</h3>
        </div>

        <div class="stat-box">
          <span>Paid to Office</span>
          <h3 id="po">0</h3>
        </div>

        <div class="stat-box">
          <span>Paid to Owner</span>
          <h3 id="pw">0</h3>
        </div>

        <div class="stat-box">
          <span>Total Amount</span>
          <h3 id="ta">0</h3>
        </div>

        <div class="stat-box highlight">
          <span>Remaining</span>
          <h3 id="ra">0</h3>
        </div>

      </div>
    </section>

    <!-- GRID -->
    <section class="grid">

      <!-- ACTIVITY -->
      <div class="box">
        <h4>Hours Activity</h4>
        <div class="bars">
          <span style="height:40%"></span>
          <span style="height:70%"></span>
          <span style="height:55%"></span>
          <span style="height:85%"></span>
          <span style="height:60%"></span>
        </div>
      </div>

      <!-- SCHEDULE -->
      <div class="box">
        <h4>Daily Schedule</h4>
        <ul class="schedule">
          <li>Design System <small>Lecture</small></li>
          <li>Typography <small>Group Test</small></li>
          <li>Color Style <small>Group Test</small></li>
          <li>Visual Design <small>Lecture</small></li>
        </ul>
      </div>

      <!-- CALENDAR -->
      <div class="box">
        <h4>August 2023</h4>
        <div class="calendar">
          <span>Mo</span><span>Tu</span><span>We</span><span>Th</span><span>Fr</span><span>Sa</span><span>Su</span>
          <span>14</span><span>15</span><span>16</span><span class="today">17</span><span>18</span><span>19</span><span>20</span>
        </div>
      </div>

      <!-- ASSIGNMENTS -->
      <div class="box">
        <h4>Assignments</h4>
        <div class="assign in">Methods of Data <span>In Progress</span></div>
        <div class="assign done">Market Research <span>Completed</span></div>
        <div class="assign up">Data Collection <span>Upcoming</span></div>
      </div>

    </section>

  </main>
</div>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
const supabaseClient = supabase.createClient(
  "https://vmcdlhwovcswxxfhdfiy.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtY2RsaHdvdmNzd3h4ZmhkZml5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY0MjMzMzEsImV4cCI6MjA4MTk5OTMzMX0.mhS8BBtuH8xAAG3B469jkcefgm73O9rVw7XBZCgWFjE"
);

async function loadTotals(){
  const { data, error } = await supabaseClient
    .from("user_dtl")
    .select(`
      total_work,
      work_8_5,
      work_6_5,
      pvc_pipe,
      paid_to_office,
      paid_to_owner,
      total_amt,
      rem_amt
    `);

  if(error){
    alert(error.message);
    console.error(error);
    return;
  }

  let t = {
    total_work:0, work_8_5:0, work_6_5:0, pvc_pipe:0,
    paid_to_office:0, paid_to_owner:0, total_amt:0, rem_amt:0
  };

  data.forEach(r=>{
    t.total_work += r.total_work || 0;
    t.work_8_5 += r.work_8_5 || 0;
    t.work_6_5 += r.work_6_5 || 0;
    t.pvc_pipe += r.pvc_pipe || 0;
    t.paid_to_office += r.paid_to_office || 0;
    t.paid_to_owner += r.paid_to_owner || 0;
    t.total_amt += r.total_amt || 0;
    t.rem_amt += r.rem_amt || 0;
  });

  document.getElementById("tw").innerText = t.total_work;
  document.getElementById("w85").innerText = t.work_8_5;
  document.getElementById("w65").innerText = t.work_6_5;
  document.getElementById("pvc").innerText = t.pvc_pipe;
  document.getElementById("po").innerText = t.paid_to_office;
  document.getElementById("pw").innerText = t.paid_to_owner;
  document.getElementById("ta").innerText = t.total_amt;
  document.getElementById("ra").innerText = t.rem_amt;
}

loadTotals();



 // Toggle mobile menu
  document.getElementById('menuToggle').addEventListener('click', function() {
    const navMenu = document.getElementById('navMenu');
    navMenu.classList.toggle('active');
  });

document.querySelectorAll('.nav li').forEach(item => {
        item.addEventListener('click', function() {
            if (this.id === 'customer') {
                window.location.href = './Ganeshmani-Customer.html';
            }
            if (this.id === 'dashboard') {
                window.location.href = './Ganeshmani-Dashboard.html';
            }
             if (this.id === 'records') {
                window.location.href = './Ganeshmani-Records.html';
            }
        });
    });
</script>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
/* üîê AUTH GUARD ‚Äî BLOCK DIRECT URL ACCESS */
const supabaseClient = supabase.createClient(
  "https://vmcdlhwovcswxxfhdfiy.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtY2RsaHdvdmNzd3h4ZmhkZml5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY0MjMzMzEsImV4cCI6MjA4MTk5OTMzMX0.mhS8BBtuH8xAAG3B469jkcefgm73O9rVw7XBZCgWFjE"

);

(async function checkAuth() {
  const { data: { session } } = await supabaseClient.auth.getSession();

  if (!session) {
    // ‚ùå Not logged in ‚Üí redirect
    window.location.replace("./login.html");
    return;
  }

  // ‚úÖ Logged in ‚Üí allow page
})();
</script>

   

</body>
</html>
